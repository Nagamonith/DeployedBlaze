<div class="container p-4">

  <!-- Filters + Summary -->
  <div class="top-section d-flex justify-content-between align-items-start flex-wrap mb-4">
    <!-- Filters -->
    <div class="filters d-flex flex-wrap align-items-center gap-3">
      <div>
        <label class="form-label fw-bold me-2">Employee</label>
        <select class="form-select" [(ngModel)]="selectedEmployee">
          <option *ngFor="let emp of employees" [value]="emp.empId">
            {{ emp.name }}
          </option>
        </select>
      </div>

      <div>
        <label class="form-label fw-bold me-2">Start Date</label>
        <input type="date" class="form-control" [(ngModel)]="startDate" />
      </div>

      <div>
        <label class="form-label fw-bold me-2">End Date</label>
        <input type="date" class="form-control" [(ngModel)]="endDate" />
      </div>

      <button class="btn btn-primary" (click)="loadData()">Search</button>

      <div class="summary-cards d-flex gap-3 mt-3 mt-md-0 ml-50">
      <div class="summary-card office">
        <p class="label">Office</p>
        <p class="value">{{ totalOffice }}</p>
      </div>
      <div class="summary-card wfh">
        <p class="label">WFH</p>
        <p class="value">{{ totalWFH }}</p>
      </div>
      <div class="summary-card leave">
        <p class="label">Leave</p>
        <p class="value">{{ totalLeave }}</p>
      </div>
    </div>
    </div>

    
  </div>

  <!-- Table -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped text-center align-middle">
      <thead>
        <tr>
          <!-- <th>Emp ID</th> -->
          <th>Name</th>
          <th>Date</th>
          <th>Type</th>
          <th>Log In</th>
          <th>Log Out</th>
          <th>Total Time</th>
          <th>Desk Time</th>
          <th>Productive Hours</th>
          <th>Summary</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of dashboardData" [ngClass]="{
          'type-office': row.type === 'Office',
          'type-wfh': row.type === 'WFH',
          'type-leave': row.type === 'Leave'
        }">
          <!-- <td>{{ row.empId }}</td> -->
          <td>{{ row.empName }}</td>
          <td>{{ row.date | date: 'yyyy-MM-dd' }}</td>
          <td>{{ row.type }}</td>
          <td>{{ row.loginTime | date:'HH:mm:ss' }}</td>
          <td>{{ row.logoutTime | date:'HH:mm:ss' }}</td>
          <td>{{ row.totalTime }}</td>
          <td>{{ row.deskTime }}</td>
          <td>{{ row.productiveHours }}</td>
  <button class="btn bi-0-circle" (click)="openWorkloadPopup(row)">
    View
  </button>        </tr>
        <tr *ngIf="dashboardData.length === 0">
          <td colspan="10" class="text-center text-muted">No records found</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<!-- ðŸ”¹ Popup Modal -->
<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal-container">
    <h5 class="mb-3">Workload for {{ selectedDate | date:'yyyy-MM-dd' }}</h5>

    <table class="table table-bordered table-striped text-center">
      <thead>
        <tr>
          <th>Project</th>
          <th>Task</th>
          <th>Hours</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let w of workloadData">
          <td>{{ w.projectName }}</td>
          <td>{{ w.taskName }}</td>
          <td>{{ w.hours }}</td>
          <td>{{ w.description }}</td>
        </tr>
        <tr *ngIf="workloadData.length === 0">
          <td colspan="4" class="text-muted">No workload found</td>
        </tr>
      </tbody>
    </table>

    <div class="text-end mt-3">
      <button class="btn btn-secondary" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>
